<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>もぐらたたきゲーム</title>
<style media="screen">
  h1 {
		text-align: center;
	}
	.container{
		width: 384px;
		margin: 0px auto;
	}
	.wrapper{
		margin: 0px auto;
	  display: flex;
	}
	img {
		width: 128px;
		height: 128px;
	}
</style>
<script>
window.onload = function() {

	// ゲーム内表記データ
  var score = document.getElementById("score");
  var total = document.getElementById("total");
	var message = document.getElementById("message")
  var counter = 0;
  var totalCounter = 0;

	//各マスをたたいたときに実行するよう設定しておく
	var ids = ['b1','b2','b3','b4','b5','b6','b7','b8','b9'];
	for (var i = 0; i < ids.length; i++) {
		document.getElementById(ids[i]).addEventListener('click', tataita);
	}

	// クラス名で取得
	// var moguras = document.getElementsByClassName("mogura");
	// for (var i = 0; i < moguras.length; i++) {
	// 	moguras[i].addEventListener('click', tataita);
	// }

  function tataita()
  {
    var obj = event.target;
		// alert(event.target.id);
    if(obj.src.indexOf("mogumogu") > 0){
      counter = counter + 1;
      score.innerHTML = counter;
    }
  }

	//ランダムにモグラを出す処理
	function moguraDasu()
	{
		if(totalCounter >= 100){
			message.innerHTML = "ゲーム終了";
			return;
		}
    totalCounter = totalCounter + 1;
    total.innerHTML = totalCounter;
		var target = ids[Math.floor(Math.random()*ids.length)];
		var masu = document.getElementById(target);
		// var masu = moguras[Math.floor(Math.random()*moguras.length)];

		masu.src = "images/mogumogu.png";
		setTimeout(function(){moguraKakusu(masu);}, 1000);
	}

	//出したモグラを隠す処理
	function moguraKakusu(masu)
	{
		masu.src = "images/ana.png";
	}

	//モグラを出す処理を呼ぶ（1回目）
	moguraDasu();

	//そのあとも1秒ごとに呼ぶ
	setInterval(moguraDasu, 500);

}
</script>
</head>
<body>
	<h1>もぐらたたきゲーム</h1>
  スコア
  <span id="score">0</span>
  出現数
  <span id="total">0</span>

	<div id="message"></div>

	<div class="container">
			<div class="wrapper">
				<div><img id="b1" class="mogura" src="images/ana.png"></div>
				<div><img id="b2" class="mogura" src="images/ana.png"></div>
				<div><img id="b3" class="mogura" src="images/ana.png"></div>
			</div>
			<div class="wrapper">
				<div><img id="b4" class="mogura" src="images/ana.png"></div>
				<div><img id="b5" class="mogura" src="images/ana.png"></div>
				<div><img id="b6" class="mogura" src="images/ana.png"></div>
			</div>
			<div class="wrapper">
				<div><img id="b7" class="mogura" src="images/ana.png"></div>
				<div><img id="b8" class="mogura" src="images/ana.png"></div>
				<div><img id="b9" class="mogura" src="images/ana.png"></div>
			</div>
	</div>
	<div id="message"></div>
</body>
</html>
